---
import Content from '~/components/widgets/Content.astro';
import Layout from '~/layouts/PageLayout.astro';

const title = "Samuel Almeida's Projects";

const metadata = {
  title: "Samuel Almeida's Projects",
};

const monthNames = [
  'Jan',
  'Feb',
  'Mar',
  'Apr',
  'May',
  'Jun',
  'Jul',
  'Aug',
  'Sep',
  'Oct',
  'Nov',
  'Dec',
];

const parseStartedAt = (value: string | undefined) => {
  if (!value) {
    return null;
  }
  const [year, month] = value.split('-');
  if (!year || !month) {
    return null;
  }
  return new Date(Date.UTC(Number(year), Number(month) - 1, 1));
};

const formatStartedAt = (value: string | undefined) => {
  const date = parseStartedAt(value);
  if (!date) {
    return null;
  }
  return `${monthNames[date.getUTCMonth()]}`;
};

type Project = {
  title: string;
  description: string;
  startedAt?: string;
  status?: string;
  specs?: string[];
  websiteLink?: string;
  storeLink?: string;
  storeLabel?: string;
  appStoreLink?: string;
  playStoreLink?: string;
  githubLink?: string;
  beLink?: string;
  feLink?: string;
  usedTech: string[];
};

const projects = [
  {
    title: 'TextRefine',
    description:
      'A multilingual writing assistant Chrome extension that corrects grammar, suggests refinements, and provides full-sentence rewrites across multiple languages.',
    startedAt: '2026-02',
    status: 'WIP',
    specs: ['Chrome Extension', 'SaaS'],
    websiteLink: 'https://textrefine.com',
    storeLink: 'https://chrome.google.com/webstore/detail/textrefine',
    storeLabel: 'Chrome Web Store',
    usedTech: [
      'TypeScript',
      'Next.js',
    ],
  },
  {
    title: 'Loop Reminder',
    description:
      'A lightweight Chrome extension for recurring reminders with simple scheduling and quick toggles.',
    startedAt: '2026-02',
    status: 'LIVE',
    specs: ['Chrome Extension'],
    storeLink: 'https://chrome.google.com/webstore/detail/loop-reminder',
    storeLabel: 'Chrome Web Store',
    usedTech: [
      'TypeScript',
    ],
  },
  {
    title: 'Bible Study Path',
    description:
      'A guided Bible study app with structured reading plans, notes, and progress tracking.',
    startedAt: '2026-02',
    status: 'STANDBY',
    specs: ['iOS', 'Android'],
    appStoreLink: 'https://apps.apple.com/app/id1234567890',
    playStoreLink: 'https://play.google.com/store/apps/details?id=com.biblestudypath',
    usedTech: [
      'React Native',
      'TypeScript',
      'Expo',
      'Firebase',
    ],
  },
  {
    title: 'ESSA E-COMMERCE',
    description:
      'A scalable e-commerce platform built for multiple businesses, covering catalog management, order flow, billing, and integrations for shipping, invoicing, and payments.',
    startedAt: '2025-06',
    status: 'WIP',
    specs: ['SaaS'],
    websiteLink: 'https://www.essaecommerce.com',
    usedTech: [
      'C#',
      '.NET 8',
      'React',
      'TypeScript',
      'PostgreSQL',
    ],
  },
  {
    title: 'TS Toolkit',
    description:
      'A TypeScript-first utility library showcasing advanced TypeScript features like generics, type guards, conditional types, mapped types, and more. Includes array, object, and string helper functions with strong typing and unit tests.',
    startedAt: '2025-08',
    status: 'COMPLETED',
    specs: ['Library'],
    githubLink: 'https://github.com/SamuelGaitkoski/ts-toolkit',
    usedTech: [
      'TypeScript',
      'Jest',
    ],
  },
  {
    title: 'Blog API',
    description:
      'A RESTful API for managing blog posts with role-based access. Admins can see all posts, users can view and manage only their own.',
    startedAt: '2025-08',
    status: 'COMPLETED',
    specs: ['API'],
    githubLink: 'https://github.com/SamuelGaitkoski/express-blog-api',
    usedTech: [
      'Node.js',
      'Express.js',
      'Mongoose',
      'MongoDB',
      'Docker',
      'JWT Authentication',
      'Unit & Integration tests',
    ],
  },
  {
    title: 'Notes CLI',
    description: 'A command-line tool to manage notes (add, list, remove) using only Node.js core modules.',
    startedAt: '2025-08',
    status: 'COMPLETED',
    githubLink: 'https://github.com/SamuelGaitkoski/node-notes-cli',
    usedTech: [
      'Node.js',
    ],
  },
  {
    title: 'Inventory API',
    description:
      'An Inventory API with role-based access, allowing admins to manage products and categories while users can browse them. Includes secure user authentication and a clear separation of privileges.',
    startedAt: '2025-08',
    status: 'COMPLETED',
    specs: ['API'],
    githubLink: 'https://github.com/SamuelGaitkoski/inventory-api',
    usedTech: [
      'Node.js',
      'Express.js',
      'TypeScript',
      'TypeORM',
      'PostgreSQL',
      'Docker',
      'JWT Authentication',
    ],
  },
  {
    title: 'Volunteering Platform',
    description:
      'Contributed to the development of a volunteering platform where users can register, log in, and sign up for events organized by entities. Entities can create, update, and delete events, while users can view available opportunities and apply until the event reaches the specified number of volunteers.',
    startedAt: '2025-03',
    status: 'COMPLETED',
    specs: ['Web App'],
    githubLink: 'https://github.com/juliavdev/voluntariado',
    usedTech: [
      'Angular',
      'Ionic',
      'Node.js',
      'Express.js',
      'MySQL',
      'Docker',
      'JWT Authentication',
    ],
  },
  {
    title: 'Stock Manager API',
    description:
      'A Stock Management WEB API to create, update, delete, and retrieve products, including individual product details.',
    startedAt: '2024-11',
    status: 'COMPLETED',
    specs: ['API'],
    githubLink: 'https://github.com/SamuelGaitkoski/web-api-stock-manager',
    usedTech: [
      'C#',
      '.NET Core 3.1',
    ],
  },
  {
    title: 'Products Manager',
    description:
      'A full-stack application where users can sign up, log in, and manage products with categories, prices, and CRUD operations.',
    startedAt: '2023-07',
    status: 'COMPLETED',
    specs: ['Web App'],
    beLink: 'https://github.com/SamuelGaitkoski/api-products',
    feLink: 'https://github.com/SamuelGaitkoski/front-angular-products',
    usedTech: [
      'Angular',
      '.NET 6',
      'EF Core',
      'SQL Server',
      'JWT Authentication',
    ],
  },
  {
    title: 'Fleet Management API',
    description:
      'A Fleet Management WEB API to create, update, delete, list, and retrieve vehicles and their associated drivers, enabling companies to efficiently manage their fleet.',
    startedAt: '2023-07',
    status: 'COMPLETED',
    specs: ['API'],
    githubLink: 'https://github.com/SamuelGaitkoski/web-api-fleet-control',
    usedTech: [
      'C#',
      '.NET Core 3.1',
      'EF Core',
      'SQL Server',
    ],
  },
  {
    title: 'Task List',
    description:
      'A simple and interactive task management application that allows users to add, edit, and delete tasks. It helps keep track of daily to-dos in a clean and user-friendly interface. Each task can be marked as completed, making it easy to manage priorities and stay organized.',
    startedAt: '2023-03',
    status: 'COMPLETED',
    specs: ['Web App'],
    githubLink: 'https://github.com/SamuelGaitkoski/react-task-list',
    usedTech: [
      'React',
      'TypeScript',
      'Styled Components',
    ],
  },
  {
    title: 'Rick and Morty Explorer UI',
    description:
      'A UI that consumes the Rick and Morty API. Features include light/dark theme switching, character search, and pages for API documentation and additional info about the API.',
    startedAt: '2023-01',
    status: 'COMPLETED',
    specs: ['Web App'],
    githubLink: 'https://github.com/SamuelGaitkoski/react-rick-and-morty-api',
    usedTech: [
      'React',
      'TypeScript',
      'SCSS',
    ],
  },
  {
    title: 'Twitter-Inspired UI',
    description: 'A Twitter-inspired UI where you can post tweets and view your own timeline.',
    startedAt: '2023-02',
    status: 'COMPLETED',
    githubLink: 'https://github.com/SamuelGaitkoski/react-twitter-ui',
    usedTech: [
      'React',
      'TypeScript',
    ],
  },
  {
    title: 'OLX-Inspired E-commerce',
    description:
      "An OLX-inspired e-commerce platform where users can sign up, log in, manage their profile, browse ads and categories, and create or edit their own ads. The project consumes an API provided by the course's instructor.",
    startedAt: '2022-10',
    status: 'COMPLETED',
    githubLink: 'https://github.com/SamuelGaitkoski/react-inspired-olx',
    usedTech: [
      'React',
      'Styled Components',
      'Redux',
      'JWT Authentication',
    ],
  },
  {
    title: 'Album Viewer',
    description: 'Browse albums and explore their photos using data from the JSON Placeholder API.',
    startedAt: '2022-10',
    status: 'COMPLETED',
    githubLink: 'https://github.com/SamuelGaitkoski/react-album-jsonplaceholder-api',
    usedTech: [
      'React',
      'TypeScript',
      'Styled Components',
    ],
  },
  {
    title: 'DevMemory',
    description:
      'DevMemory is a memory matching game where players must find pairs of identical images. The game tracks the time taken to complete the game and counts the number of moves made, adding an extra layer of challenge and competition.',
    startedAt: '2022-09',
    status: 'COMPLETED',
    specs: ['Web App'],
    githubLink: 'https://github.com/SamuelGaitkoski/react-memory-game',
    usedTech: [
      'React',
      'TypeScript',
      'Styled Components',
    ],
  },
  {
    title: 'IMC Calculator',
    description:
      'Calculate your BMI (Body Mass Index), a standard adopted by the World Health Organization to estimate the ideal weight for each person. The calculator determines your BMI based on the height and weight you enter and gives a visual indication of your result.',
    startedAt: '2022-09',
    status: 'COMPLETED',
    specs: ['Web App'],
    githubLink: 'https://github.com/SamuelGaitkoski/react-imc-calculator',
    usedTech: [
      'React',
      'TypeScript',
      'CSS Modules',
    ],
  },
];

const projectsSorted: (Project & { _date: Date | null; _dateLabel: string | null })[] = [...projects]
  .map((project: Project) => ({
    ...project,
    _date: parseStartedAt(project.startedAt),
    _dateLabel: formatStartedAt(project.startedAt),
  }))
  .sort((a, b) => {
    if (a._date && b._date) {
      return b._date.getTime() - a._date.getTime();
    }
    if (a._date) {
      return -1;
    }
    if (b._date) {
      return 1;
    }
    return a.title.localeCompare(b.title);
  });

const groupedProjects = projectsSorted.reduce<Record<string, typeof projectsSorted>>((acc, project) => {
  const year = project._date ? String(project._date.getUTCFullYear()) : 'Undated';
  if (!acc[year]) {
    acc[year] = [];
  }
  acc[year].push(project);
  return acc;
}, {});

const yearOrder = Object.keys(groupedProjects)
  .filter((year) => year !== 'Undated')
  .map((year) => Number(year))
  .sort((a, b) => b - a)
  .map(String)
  .concat(groupedProjects.Undated ? ['Undated'] : []);

---

<Layout metadata={metadata}>
  <main>
    <div class="w-full mx-auto">
      <div class="px-4 md:px-36">
        <section class="mx-auto mb-10 md:mb-9 mt-8 md:mt-16">
          <header>
            <h1 class="text-center text-4xl md:text-5xl font-extrabold md:font-bold">
              {title}
            </h1>
          </header>
        </section>

        {
          yearOrder.map((year) => (
            <section class="mb-12 md:mb-14">
              <div class="mb-6 flex flex-wrap items-center gap-4">
                <h2 class="text-2xl md:text-3xl font-extrabold text-primary">{year}</h2>
                <div class="h-0.5 flex-1 bg-gradient-to-r from-primary via-primary/70 to-transparent" />
                <span class="text-xs uppercase tracking-[0.2em] text-slate-400">
                  {groupedProjects[year].length} {groupedProjects[year].length === 1 ? 'project' : 'projects'}
                </span>
              </div>
              <div class="relative z-0">
                <div class="absolute left-[7.5px] top-2 bottom-2 w-0.5 bg-slate-700/60" />
                <div class="space-y-6">
                  {groupedProjects[year].map(({ title, description, githubLink, websiteLink, beLink, feLink, usedTech, storeLink, storeLabel, appStoreLink, playStoreLink, status, specs, _dateLabel }) => {
                    const techContent = (
                      <div class="text-sm md:text-xs font-semibold md:font-normal text-black dark:text-slate-400">
                        {usedTech.join(' · ')}
                      </div>
                    );

                    const linksArray = [
                      websiteLink && (
                        <a href={websiteLink} target="_blank" class="no-underline text-inherit">
                          Website
                        </a>
                      ),
                      storeLink && (
                        <a href={storeLink} target="_blank" class="no-underline text-inherit">
                          {storeLabel || 'Store'}
                        </a>
                      ),
                      appStoreLink && (
                        <a href={appStoreLink} target="_blank" class="no-underline text-inherit">
                          App Store
                        </a>
                      ),
                      playStoreLink && (
                        <a href={playStoreLink} target="_blank" class="no-underline text-inherit">
                          Google Play
                        </a>
                      ),
                      beLink && (
                        <a href={beLink} target="_blank" class="no-underline text-inherit">
                          Back-end Github
                        </a>
                      ),
                      feLink && (
                        <a href={feLink} target="_blank" class="no-underline text-inherit">
                          Front-end Github
                        </a>
                      ),
                      githubLink && !websiteLink && !beLink && !feLink && (
                        <a href={githubLink} target="_blank" class="no-underline text-inherit">
                          Github
                        </a>
                      ),
                      !websiteLink && !githubLink && !beLink && !feLink && !storeLink && !appStoreLink && !playStoreLink && <span>No links available</span>,
                    ].filter(Boolean);

                    const linksContent = (
                      <div class="text-sm md:text-xs font-semibold md:font-normal text-black dark:text-slate-400">
                        {linksArray.map((item, index) => (
                          <span>
                            {item}
                            {index < linksArray.length - 1 && ' · '}
                          </span>
                        ))}
                      </div>
                    );

                    return (
                      <div class="relative pl-8 z-10">
                        <span class="absolute left-0 top-8 h-2.5 w-2.5 rounded-full bg-primary ring-3 ring-primary/50 shadow-[0_0_16px_rgba(59,130,246,0.55)]" />
                        <Content
                          items={[
                            {
                              icon: 'mdi:package-variant-closed',
                              title: 'Description',
                              description: description,
                            },
                            {
                              icon: 'mdi:code-tags',
                              title: 'Technologies',
                              description: techContent,
                            },
                            {
                              icon: 'mdi:external-link',
                              title: 'Links',
                              description: linksContent,
                            },
                          ]}
                          classes={{
                            container: 'p-6 md:p-6 lg:p-6 my-6 bg-blue-50 dark:bg-slate-800 rounded-md',
                            gridContainer: 'gap-y-2 md:gap-y-2',
                            panel: 'bg-blue-50 dark:bg-inherit shadow-none hover:shadow-none items-start',
                            title: 'text-black',
                            description: 'ml-0 mt-1 text-black leading-relaxed text-sm md:text-xs font-semibold md:font-normal',
                            icon: 'h-7 md:h-6 w-7 md:w-6 text-black dark:text-white',
                          }}
                        >
                          <Fragment slot="content">
                            <div class="flex flex-wrap items-center justify-between gap-3">
                              <div class="flex flex-wrap items-center gap-2">
                                {_dateLabel && (
                                  <span class="text-[11px] uppercase tracking-[0.2em] text-primary/70">
                                    {_dateLabel}
                                  </span>
                                )}
                                <h3 class="text-2xl font-extrabold tracking-tight dark:text-white md:text-xl">{title}</h3>
                                {status && (
                                  <span class="rounded-full border border-black/10 bg-white/60 px-2 py-1 text-[10px] uppercase text-black dark:border-white/10 dark:bg-white/10 dark:text-white">
                                    {status}
                                  </span>
                                )}
                              </div>
                              {specs && specs.length > 0 && (
                                <div class="flex flex-wrap gap-2 text-[11px] font-semibold uppercase tracking-wide text-black dark:text-slate-300">
                                  {specs.map((spec) => (
                                    <span class="rounded-full border border-black/10 bg-white/40 px-2 py-1 text-[10px] uppercase text-black/80 dark:border-white/10 dark:bg-white/5 dark:text-slate-200">
                                      {spec}
                                    </span>
                                  ))}
                                </div>
                              )}
                            </div>
                          </Fragment>
                        </Content>
                      </div>
                    );
                  })}
                </div>
              </div>
            </section>
          ))
        }
      </div>
    </div>
  </main>
</Layout>